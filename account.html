<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <title>Profile - SiAmaWolu</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="mx-auto overflow-y-hidden min-w-[320px] max-w-[420px]">
    <main class="bg-[#EBEBFF] py-5 px-5 h-screen overflow-y-scroll">
      <div class="bg-white mt-20 relative shadow rounded-lg mx-auto">
        <div class="flex justify-center">
          <img
            src="https://i1.sndcdn.com/artworks-000069280530-9e6rnp-t500x500.jpg"
            alt=""
            class="rounded-full mx-auto absolute -top-20 w-32 h-32 shadow-md border-4 border-white transition duration-200 transform hover:scale-110"
          />
        </div>

        <div class="mt-16">
          <h1
            id="accountName"
            class="font-bold text-center text-3xl text-gray-900"
          ></h1>

          <div class="w-full my-5">
            <h3 class="text-sm text-bold text-gray-900 text-left px-6">
              Recent Activites
            </h3>
            <div
              id="history"
              class="mt-5 w-full flex flex-col items-center overflow-hidden text-sm"
            ></div>
          </div>
        </div>
      </div>

      <!-- nav -->
      <!-- MDI Icons -->
      <link
        rel="stylesheet"
        href="https://cdn.materialdesignicons.com/6.5.95/css/materialdesignicons.min.css"
      />

      <div class="flex items-center justify-center w-full">
        <!-- Navigation Bar -->
        <div class="fixed bottom-2 px-2 bg-white shadow-lg rounded-2xl">
          <div class="flex flex-row space-x-6">
            <!-- Item #1 -->
            <div class="flex group">
              <a
                href="index.html"
                class="px-3 py-2 text-indigo-400 hover:text-indigo-800"
              >
                <span class="flex flex-col items-center">
                  <!-- Icon -->
                  <i
                    class="mdi mdi-home-outline mdi-24px mx-1 text-indigo-400 group-hover:text-indigo-800 transition-color duration-200"
                  ></i>

                  <!-- Text -->
                  <span class="text-xs mb-2 transition-all duration-200">
                    Home
                  </span>

                  <!-- Focus Dot -->
                  <span
                    class="h-2 w-2 rounded-full group-hover:bg-indigo-500 hover:h-3 hover:w-3 transition-all duration-150 delay-100"
                  ></span>
                </span>
              </a>
            </div>

            <!-- Item #2 -->
            <div class="flex group">
              <a
                href="presence.html"
                class="px-3 py-2 text-indigo-400 hover:text-indigo-800"
              >
                <span class="flex flex-col items-center">
                  <!-- Icon -->
                  <i
                    class="mdi mdi-note-edit-outline mdi-24px mx-1 text-indigo-400 group-hover:text-indigo-800 transition-color duration-200"
                  ></i>

                  <!-- Text -->
                  <span class="text-xs mb-2 transition-all duration-200">
                    Presence
                  </span>

                  <!-- Focus Dot -->
                  <span
                    class="h-2 w-2 rounded-full group-hover:bg-indigo-500 transition-all duration-150 delay-100"
                  ></span>
                </span>
              </a>
            </div>

            <!-- Item #3 Active -->
            <div class="flex group">
              <a
                href="statistic.html"
                class="px-3 py-2 text-indigo-400 hover:text-indigo-800"
              >
                <span class="flex flex-col items-center">
                  <!-- Icon -->
                  <i
                    class="mdi mdi-signal-cellular-outline mdi-24px mx-1 text-indigo-400 group-hover:text-indigo-800 transition-color duration-200"
                  ></i>

                  <!-- Text -->
                  <span class="text-xs mb-2 transition-all duration-200">
                    Statistic
                  </span>

                  <!-- Focus Dot -->
                  <span
                    class="h-2 w-2 rounded-full group-hover:bg-indigo-500 transition-all duration-150 delay-100"
                  ></span>
                </span>
              </a>
            </div>

            <!-- Item #5 -->
            <div class="flex group">
              <a class="px-3 py-2 text-indigo-800 hover:text-indigo-800">
                <span class="flex flex-col items-center">
                  <!-- Icon -->
                  <i
                    class="mdi mdi-account-circle-outline mdi-24px mx-1 text-indigo-800 group-hover:text-indigo-800 transition-color duration-200"
                  ></i>

                  <!-- Text -->
                  <span class="text-xs mb-2 transition-all duration-200">
                    Account
                  </span>

                  <!-- Focus Dot -->
                  <span
                    class="h-1 w-4 bg-indigo-800 rounded-full group-hover:bg-indigo-500 transition-all duration-150 delay-100"
                  ></span>
                </span>
              </a>
            </div>
          </div>
        </div>
      </div>
      <!-- endnav -->
    </main>
    <script>
      const base_url = "https://bb90-18-141-198-210.ap.ngrok.io";
      fetch(`${base_url}/student/history/`, {
        headers: {
          Authorization: "Token 2171ed5591d71b24e7b88158412aadd9b2a6c1a5",
        },
      })
        .then(function (response) {
          // The API call was successful!
          if (response.ok) {
            return response.json();
          } else {
            return Promise.reject(response);
          }
        })
        .then(function (data) {
          // This is the JSON from our response
          console.log(data);
          // console.log(data.data.lectures);
          document.getElementById("accountName").innerText = data.data[1].name;
          if (Object.keys(data.data).length !== 0) {
            for (let key in data.data) {
              //   var kelas = data.data.lectures[key];
              console.log(key, data.data[key]);
              if (data.data[key].status === "HADIR") {
                var icon = `<i class="mdi mdi-check-outline mdi-18px mx-1 text-green-500"
                      ></i>`;
              } else if (data.data[key].status === "ALPHA") {
                var icon = `<i
                        class="mdi mdi-alpha-a-circle text-[19px] mx-1 text-red-500"
                      ></i>`;
              } else {
                var icon = `<i class="mdi mdi-alpha-i-circle text-[19px] mx-1 text-yellow-500"></i>`;
              }
              document.getElementById("history").innerHTML += `<span
                      class="w-full border-t border-gray-100 text-gray-600 py-4 pl-6 pr-3 w-full block hover:bg-gray-100 transition duration-150"
                    >
                    ${icon}
                    ${data.data[key].subject}
                      <span class="text-gray-500 text-xs">${data.data[key].date}
      </span>
                    </span>
                  `;
            }
          } else {
            document.getElementById("history").innerHTML += `<span
                      class="w-full border-t border-gray-100 text-gray-600 py-4 pl-6 pr-3 w-full block hover:bg-gray-100 transition duration-150"
                    > Belum adad riwayat absensi
                    </span>
                  `;
          }
        })
        .catch(function (err) {
          // There was an error
          console.warn("Something went wrong.", err);
        });
    </script>
  </body>
</html>
